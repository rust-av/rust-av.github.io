<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=apple-touch-icon sizes=120x120 href=https://mindfreeze.videolan.me/rust-av/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://mindfreeze.videolan.me/rust-av/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://mindfreeze.videolan.me/rust-av/favicon-16x16.png><link rel=manifest href=https://mindfreeze.videolan.me/rust-av/manifest.json><meta name=theme-color content=#ffffff><link rel=stylesheet href=https://mindfreeze.videolan.me/rust-av/css/bootstrap-reboot.css><link rel=stylesheet href=https://mindfreeze.videolan.me/rust-av/css/bootstrap.css><link rel=stylesheet href=https://mindfreeze.videolan.me/rust-av/css/font-awesome.min.css><link rel=stylesheet href=https://mindfreeze.videolan.me/rust-av/css/rav1e.css><title>Why you should care about AOM Analyzer - Rust AV</title></head><body><header class="navbar navbar-expand navbar-dark flex-column flex-md-row tk-navbar"><a class=navbar-brand href=https://mindfreeze.videolan.me/rust-av/><img src=https://mindfreeze.videolan.me/rust-av/img/logo.png class=align-middle alt></a><div class="collapse navbar-collapse"><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://mindfreeze.videolan.me/rust-av/>Home</a></li><li class=nav-item><a class="nav-link  active" href=https://mindfreeze.videolan.me/rust-av/blog/2019-04-25-implementing-tile-encoding-in-rav1e./>Blog</a></li><li class=nav-item><a class=nav-link href=https://mindfreeze.videolan.me/rust-av/community/>Community</a></li></ul></div><ul class="navbar-nav flex-row ml-md-auto d-none d-md-flex"><li class=nav-item><a class="nav-link p-2" href=https://github.com/rust-av target=_blank rel=noopener aria-label=GitHub><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64.0.0 114.61.0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34.0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49.0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75.0.0 21.49-6.88 70.4 26.24a242.65 242.65.0 0 1 128.18.0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69.0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41.0 34.22-.31 61.83-.31 70.23.0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37.0 256 0z" fill="currentcolor" fill-rule="evenodd" /></svg></a></li></ul></header><div class="container-fluid tk-blog"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 tk-sidebar"><div class="tk-docs-toggle d-md-none p-0 d-flex ml-3 collapsed align-item-center"><h1 class=tk-title>Why you should care about AOM Analyzer</h1><button class="btn btn-link" type=button data-toggle=collapse data-target=#tk-docs-nav aria-controls=tk-docs-nav aria-expanded=false aria-label="Toggle docs navigation"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false"><title>Menu</title><path stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22"/></svg></button></div><nav class="tk-links collapse" id=tk-docs-nav><div class="tk-toc-item active"><p class=tk-toc-link>Blog Posts</p><ul class="nav tk-sidenav"><li><a href=https://mindfreeze.videolan.me/rust-av/blog/2019-04-25-implementing-tile-encoding-in-rav1e./>Implementing Tile Encoding in rav1e</a></li><li><a href=https://mindfreeze.videolan.me/rust-av/blog/2019-04-09-using-rav1e-from-your-code/>Using rav1e - from your own code</a></li><li><a href=https://mindfreeze.videolan.me/rust-av/blog/2019-02-18-why-you-should-care-about-aom-analyzer-tool-e2808b/ class=active>Why you should care about AOM Analyzer</a></li></ul></div></nav></div><div class="d-none d-xl-block col-xl-4 tk-toc"><div class=section-nav><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#how-to-run><strong><em>How to Run</em></strong></a></li><li><a href=#toolbar><strong><em>Toolbar</em></strong></a></li></ul></li></ul></li></ul></nav></div></div><main class="col-12 col-md-9 col-xl-7 py-md-3 pl-md-3 tk-content tk-docs"><h1 class=tk-title>Why you should care about AOM Analyzer</h1><p class=tk-date>Vibhoothi</p><p>Hi Folks,<br>It&rsquo;s been a while I have written a blog, this is the right time I guess. So lately I am trying to do a kind of research with video encoding in power constrained devices as part of my undergrad thesis project. So I was going into more details about encoders in general. After that, I have also gone through the details about HEVC, AV1 and all.<br>We all know about very positive development advances in AV1 when we see with HEVC. So if you are not following anything in this digital video field, AV1 is next generation and new standard after HEVC.It could have like 40% better picture quality than HEVCcross-platform but as_of_now the main issue or the main disadvantage of av1 is the fact that it is very compute intensive, for solving this issue the much required thing would be having a nice software which does a full analysis of the video including the metadata.</p><p>Now there is a tool called AOM-Analyser which is there for a while</p><p><img src=https://lh6.googleusercontent.com/20ijuaXucLNYrviX0V5jbp0D_ZoVbRcHuxgjKVwafRoPL_hiwzbpu0jhL0Quq0nnVLMHEOzyoFuHchipcaT5g79FBJs05VKX3JlWoKCL3bHU9FP50CM8gTV_cuXOaDMXgek20dJg alt>AOM Analyzer Tool</p><p>This tool is a bitstream analysis which does various analysis of a video. This is a cross platform tool for macOS, Windows and also Linux. This is also open sourced at <a href=https://github.com/mbebenita/aomanalyzer>GitHub</a>. You can grab it if you want to try out for yourself. We can also download the <a href=https://people.xiph.org/~mbebenita/analyzer/>pre compiled</a> ones and use it if you dont want to build your own. There is a very nice <a href="https://arewecompressedyet.com/analyzer/?maxFrames=10&amp;d=https://people.xiph.org/~mbebenita/analyzer/inspect.js&amp;f=https://people.xiph.org/~mbebenita/analyzer/output.ivf">live demo</a> of the tool for anyone to see before downloading.</p><p>You can refer to the GitHub <a href=https://github.com/mbebenita/aomanalyzer/blob/master/README.md>readme</a>.</p><p>This tool was the first attempt to make some contribution for effective analysis considering the fact that we need huge intense amount of computation power. It is not really feasible for a user to do the encoding things locally because if we want to encode a single video frame it could take very long time ranging from hours to days. Most of the companies and developers run the encoders in the cloud platform running parallely. he anlyser decodes AV1 bitstream and display many information about a particular bitstream. As per tests it is said that for a single 1080p video frame it produces around 4MB of raw image data and big amount of analysis metadata. When one do it locally it can be very small to no issues but when someone does it online will be the biggest enemy would be huge data bandwidth and latency. After lots of discussions the team came up with an ideal solution ie run it directly in cloud which does potentially solve this issue but for running the bitstream analyser one need to also have everything in the JavaScript format, for that team used <a href=http://kripken.github.io/emscripten-site/>Emscripten</a> which could do this and run inside the browser itself.</p><p>The Analyser is made of two components one is a emscripten compiled version of the codec( decoder.js) and another file which is the frontend of app based of HTML and Typescript.</p><p>Anyone can do this analysis of the video, all he/she need to do is specify a video file possibly in “*.ivf” format and also appropriate emscripten script compiled version of the decoder to decode it. The format of this would be like</p><h3 id=how-to-run><strong><em>How to Run</em></strong></h3><p>We can use electron for running the analyzer</p><pre><code>&lt;em&gt;electron . decoder1 video1&lt;/em&gt;
</code></pre><p>Both decoder and video parameters can either point to a local file or we could also use a remote url.<br>If you didn’t specify any arguments then it will select any random jobs from <a href=https://arewecompressedyet.com/>areWeCompressedYet</a>.<br>Like I said earlier if you did download a standalone package of the tool then you don’t need to use electron, you can directly run the binary directly from command line<br>We can also use multiple decoders for analysis of the video.</p><p>There are various other command line options for doing this ie.</p><ul><li><em>&ndash;zoomFactor</em> with this a user can set the default zoom level, suppose if it is too large for your resolution then sets the default zoom level, if you feel that the UI elements are too large then you can set it to either 0.75 or 0.50</li><li><em>&ndash;dev</em> if you pass this then it will open up the electron dev tools which is disabled by default.</li><li>_&ndash;frames _which can be used to the specific number of frames we need to decode, by default it is set to 4.</li><li>&ndash;split this is a very useful flag which can be used for doing a very good side by side comparison of the video. For this flag to work you might need to do specify at least two videos. When we use this the tool doesn’t show any analyzer layers which does improve decoding faster.<ul><li>Left (first video)</li><li>Right (second video)</li><li>Vertical Split (first video on the left, second video on the right)</li><li>Horizontal Split (first video on the top, second video on the bottom)</li></ul></li></ul><p>The best part of this is that everything you did can be easily shared and all this is inside the browser. The decoder JS are generated automatically and submitted to<a href=https://arewecompressedyet.com/> AreWeCompressedYet</a> so anyone can use it.</p><p>You can download videos from <a href=https://media.xiph.org/video/derf/#F1>here</a> for doing the encoding in local machine. I will recommend using in_to_tree, ducks_take_off, crowd_run, old_town_cross, these all are 8bit, one could use either 1080 or 720p as it will be better for doing the test.</p><h3 id=toolbar><strong><em>Toolbar</em></strong></h3><p>AOM Analyzer has a toolbar at the top</p><p><img src=https://lh5.googleusercontent.com/yE_LXsBnE5DIEqzUWTVqD26AdFi9jilh46x9d037Ker5_1_kXwOYExYaZxZl1qu78Yq8llu71LrBtNOKIgKnUT_zyFwpSns0p2hy8WTxOwgODDQ3FpE-ARoDHUQzct0KwA4u9ORB alt>Toolbar View</p><p>This Toolbar has different options like</p><ul><li>_Layers: _We can toggle various layers on and off from. With this we can understand what are the different things in the video and can be used to inspect their value in the block info tab. These are the various properties you can toggle from the layer:<ul><li>Decoded Image: Shows the decoded image</li><li>Super block grid: Show the maximum possible blocks for the frame.The AV1 supports maximum of 64x64 Blocks while the minimum is 4x4.</li><li>Split Grid: Shows the split grid of the frame using intra frame prediction.</li><li>Transform grid: Shows the transform layer of the frame using intra frame prediction.</li><li>Transform Type: Shows the transform type of the frame.</li><li>Motion Vector: Displays the motion vectors of the frame using inter frame prediction</li><li>Frame reference:</li><li>Mode:</li><li>UV Mode:</li><li>Show segment: Overlays the segment of the video.</li><li>Bits: Show bit accounting layer, to make it more precise we can disable the image and see. There are three options for bit scale<ul><li>Frame Relative: For single frame</li><li>Video Relative: Maximum no of bits is computed over all frames in video sequence.</li><li>Video Relative(all): Same as the video relative, the only difference is it takes all sequence which are loaded so it is useful when we want to compare frames b/w two sequence.</li><li>Heat Map: Shows the bits in a heat map style</li><li>Heat Map(Opaque): This shows in heat map with additional color like blue etc for areas where there is no heatmap generated</li><li>We can also toggle some specific accounting layer’s symbol to get additional information. This can be useful to dive into the bit distribution of a specific symbol.<br><br></li></ul></li></ul></li></ul><p><img src=https://lh5.googleusercontent.com/3e4tBkfytjAzU_jRhnPJEbImhJs08CTzD9UwGLIcRJ2lU64_DF_iU3dmSAuaSfeRtmSY9vqUPkCcWFmVe8ObIKGIRdpKjPVRXxsXo4ci3rC9EYLP5opa4x-F23h4q2I3S26QZJTO alt>_This is a bit distribution of the read<em>partition symbol.</em></p><ul><li>Skip: This is mainly used to show whether that a block has coffienets. Usually they are drawn as Voilet/Blue. If we see carefully we can say that bits are overlayed in non-skipped areas.</li><li>Filiters: Show the filiter for the specific frame.</li><li>CDEF: Constrained Directional Enhancement Filter this is built out of three pieces (directional search, the constrained replacement/lowpass filter, and integer-pixel tap placement) that we’ve used before in daala analysis. CDEF is intended to remove or reduce basis noise and ringing around hard edges in an image without blurring or damaging the edge</li></ul><p><img src=https://lh4.googleusercontent.com/vBa4WAT8nnHMQ-9YK9dTX_fCCV_nCSBOyM8-f3DtefBX3jXT70PT5MaJMp1cKcVcDn-0cak5FlVd6-1FELSxAWt9a6xvHpwcI6vckKnWGSTrGsJHVClGi4xduKoCKf-4khi16J-9 alt>_CDEF Filter _</p><div class=tk-next><b>Next up</b>: <a href=https://mindfreeze.videolan.me/rust-av/blog/2019-04-09-using-rav1e-from-your-code/>Using rav1e - from your own code</a></div></main></div></div><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js integrity=sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7 crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js integrity=sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8 crossorigin=anonymous></script><script src=https://mindfreeze.videolan.me/rust-av/js/bootstrap.min.js></script><script src=https://mindfreeze.videolan.me/rust-av/js/highlight.js></script><script>$(function(){$("pre code").each(function(i,block){if(block.className.indexOf('language-rust')>=0){var new_content='';var lines=block.textContent.split('\n');for(var i=0;i<lines.length;i++){if(lines[i].indexOf('# ')==0||lines[i]=='#'){continue}
new_content+=lines[i].trimRight()+'\n';}
block.textContent=new_content.replace(/\n\n\n/g,"\n\n").trimRight();}
hljs.highlightBlock(block);});});</script><script>$(document).ready(function(){let data;fetch('https://api.github.com/orgs/rust-av/repos?type=all').then(function(res){return res.json();}).then(function(json){data=json;document.getElementById("repos").innerHTML=data.length;})});</script><script>$(document).ready(function(){let data;let stargazersCount=0;fetch('https://api.github.com/orgs/rust-av/repos?type=all').then(function(res){return res.json();}).then(function(json){data=json;data.map((data)=>{stargazersCount=stargazersCount+data.stargazers_count
document.getElementById("stars").innerHTML=stargazersCount})})})</script><script>$(document).ready(function(){let data;let forksCount=0;fetch('https://api.github.com/orgs/rust-av/repos?type=all').then(function(res){return res.json();}).then(function(json){data=json;data.map((data)=>{forksCount=forksCount+data.forks_count
document.getElementById("forks").innerHTML=forksCount})})})</script><script>$(document).ready(function(){let data;let openIssuesCount=0;fetch('https://api.github.com/orgs/rust-av/repos?type=all').then(function(res){return res.json();}).then(function(json){data=json;data.map((data)=>{openIssuesCount=openIssuesCount+data.open_issues_count
document.getElementById("openissues").innerHTML=openIssuesCount})})})</script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js></script><script type=text/javascript>docsearch({apiKey:'d7b5b785798fe748621bcaa8301a2201',indexName:'tokio',inputSelector:'#search-input',debug:false});</script></body></html>